[{"/Users/maroekure/Desktop/type/jbook/src/index.tsx":"1","/Users/maroekure/Desktop/type/jbook/src/plugins/unpkg-path-plugin.ts":"2","/Users/maroekure/Desktop/type/jbook/src/plugins/fetch-plugin.ts":"3","/Users/maroekure/Desktop/type/jbook/src/components/code-editor.tsx":"4"},{"size":2333,"mtime":1654078013736,"results":"5","hashOfConfig":"6"},{"size":830,"mtime":1609447184000,"results":"7","hashOfConfig":"6"},{"size":1797,"mtime":1609453365000,"results":"8","hashOfConfig":"6"},{"size":2199,"mtime":1654082685186,"results":"9","hashOfConfig":"6"},{"filePath":"10","messages":"11","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"12","usedDeprecatedRules":"13"},"9wu1m3",{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"13"},{"filePath":"16","messages":"17","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"13"},{"filePath":"18","messages":"19","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/maroekure/Desktop/type/jbook/src/index.tsx",["20"],"import 'bulmaswatch/superhero/bulmaswatch.min.css';\nimport * as esbuild from 'esbuild-wasm';\nimport { useState, useEffect, useRef } from 'react';\nimport ReactDOM from 'react-dom';\nimport { unpkgPathPlugin } from './plugins/unpkg-path-plugin';\nimport { fetchPlugin } from './plugins/fetch-plugin';\nimport CodeEditor from './components/code-editor';\n\nconst App = () => {\n  const ref = useRef<any>();\n  const iframe = useRef<any>();\n  const [input, setInput] = useState('');\n  const [code, setCode] = useState('');\n\n  const startService = async () => {\n    ref.current = await esbuild.startService({\n      worker: true,\n      wasmURL: 'https://unpkg.com/esbuild-wasm@0.8.27/esbuild.wasm',\n    });\n  };\n  useEffect(() => {\n    startService();\n  }, []);\n\n  const onClick = async () => {\n    if (!ref.current) {\n      return;\n    }\n\n    iframe.current.srcdoc = html;\n\n    const result = await ref.current.build({\n      entryPoints: ['index.js'],\n      bundle: true,\n      write: false,\n      plugins: [unpkgPathPlugin(), fetchPlugin(input)],\n      define: {\n        'process.env.NODE_ENV': '\"production\"',\n        global: 'window',\n      },\n    });\n\n    // setCode(result.outputFiles[0].text);\n    iframe.current.contentWindow.postMessage(result.outputFiles[0].text, '*');\n  };\n\n  const html = `\n    <html>\n      <head></head>\n      <body>\n        <div id=\"root\"></div>\n        <script>\n          window.addEventListener('message', (event) => {\n            try {\n              eval(event.data);\n            } catch (err) {\n              const root = document.querySelector('#root');\n              root.innerHTML = '<div style=\"color: red;\"><h4>Runtime Error</h4>' + err + '</div>';\n              console.error(err);\n            }\n          }, false);\n        </script>\n      </body>\n    </html>\n  `;\n\n  return (\n    <div>\n      <CodeEditor\n        initialValue=\"const a = 1;\"\n        onChange={(value) => setInput(value)}\n      />\n      <textarea\n        value={input}\n        onChange={(e) => setInput(e.target.value)}\n      ></textarea>\n      <div>\n        <button onClick={onClick}>Submit</button>\n      </div>\n      <pre>{code}</pre>\n      <iframe\n        ref={iframe}\n        title=\"preview\"\n        sandbox=\"allow-scripts\"\n        srcDoc={html}\n      />\n    </div>\n  );\n};\n\nReactDOM.render(<App />, document.querySelector('#root'));\n",["21","22"],"/Users/maroekure/Desktop/type/jbook/src/plugins/unpkg-path-plugin.ts",[],"/Users/maroekure/Desktop/type/jbook/src/plugins/fetch-plugin.ts",[],"/Users/maroekure/Desktop/type/jbook/src/components/code-editor.tsx",[],{"ruleId":"23","severity":1,"message":"24","line":13,"column":16,"nodeType":"25","messageId":"26","endLine":13,"endColumn":23},{"ruleId":"27","replacedBy":"28"},{"ruleId":"29","replacedBy":"30"},"@typescript-eslint/no-unused-vars","'setCode' is assigned a value but never used.","Identifier","unusedVar","no-native-reassign",["31"],"no-negated-in-lhs",["32"],"no-global-assign","no-unsafe-negation"]